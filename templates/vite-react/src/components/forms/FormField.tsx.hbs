import { Input, Textarea } from '@/components/common/Input';
import { Select } from '@/components/common/Select';
import { Checkbox } from '@/components/common/Checkbox';

export interface SelectOption {
  value: string;
  label: string;
}

export interface FormFieldProps {
  name: string;
  label: string;
  type: 'string' | 'text' | 'number' | 'boolean' | 'date' | 'datetime' | 'email' | 'url' | 'enum' | 'relation';
  required?: boolean;
  disabled?: boolean;
  placeholder?: string;
  hint?: string;
  options?: SelectOption[];
  min?: number;
  max?: number;
  minLength?: number;
  maxLength?: number;
}

export function FormField({
  name,
  label,
  type,
  required,
  disabled,
  placeholder,
  hint,
  options = [],
  min,
  max,
  minLength,
  maxLength,
}: FormFieldProps) {
  // Boolean field
  if (type === 'boolean') {
    return (
      <Checkbox
        name={name}
        label={label}
        hint={hint}
        disabled={disabled}
        required={required}
      />
    );
  }

  // Textarea field
  if (type === 'text') {
    return (
      <Textarea
        name={name}
        label={label}
        hint={hint}
        placeholder={placeholder}
        disabled={disabled}
        required={required}
        minLength={minLength}
        maxLength={maxLength}
      />
    );
  }

  // Select field (enum or relation)
  if (type === 'enum' || type === 'relation') {
    return (
      <Select
        name={name}
        label={label}
        options={options}
        placeholder={placeholder || `Select ${label.toLowerCase()}...`}
        hint={hint}
        disabled={disabled}
        required={required}
      />
    );
  }

  // Input field types
  const inputType = {
    string: 'text',
    number: 'number',
    date: 'date',
    datetime: 'datetime-local',
    email: 'email',
    url: 'url',
  }[type] || 'text';

  return (
    <Input
      name={name}
      type={inputType}
      label={label}
      hint={hint}
      placeholder={placeholder}
      disabled={disabled}
      required={required}
      min={min}
      max={max}
      minLength={minLength}
      maxLength={maxLength}
    />
  );
}
