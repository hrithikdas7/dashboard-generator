/**
 * {{entity.name}} Detail Page
 * Generated by Dashboard Generator
 */

import { Link } from 'react-router-dom';
import { PageHeader } from '@/components/layout';
import { Card, CardHeader, CardTitle, CardContent, Button, Badge, getStatusVariant, ConfirmModal, LoadingState } from '@/components/common';
import { formatDate, formatDateTime, formatCurrency } from '@/utils/format';
import { use{{entity.name}}DetailPage } from './use{{entity.name}}DetailPage';

export function {{entity.name}}DetailPage() {
  const {
    id,
    {{camelCase entity.name}},
    isLoading,
    isError,
    error,
    showDeleteModal,
    setShowDeleteModal,
    isDeleting,
    handleDelete,
  } = use{{entity.name}}DetailPage();

  if (isLoading) {
    return <LoadingState message="Loading {{lowerCase entity.name}}..." />;
  }

  if (isError || !{{camelCase entity.name}}) {
    return (
      <div className="text-center py-12">
        <p className="text-red-600">{error || '{{entity.name}} not found'}</p>
        <Link to="/{{entity.slug}}" className="text-primary-600 hover:underline mt-2 inline-block">
          Back to {{entity.pluralName}}
        </Link>
      </div>
    );
  }

  return (
    <div>
      <PageHeader
        title={ {{camelCase entity.name}}.name || `{{entity.name}} ${ id}`}
        breadcrumbs={[
          { label: 'Dashboard', href: '/' },
          { label: '{{entity.pluralName}}', href: '/{{entity.slug}}' },
          { label: {{camelCase entity.name}}.name || `{{entity.name}} ${ id}` },
        ]}
        action={
          <div className="flex items-center gap-2">
            <Link to={`/{{entity.slug}}/${ id}/edit`}>
              <Button variant="secondary">Edit</Button>
            </Link>
            <Button variant="danger" onClick={() => setShowDeleteModal(true)}>
              Delete
            </Button>
          </div>
        }
      />

      <div className="grid gap-6">
        {/* Main details */}
        <Card>
          <CardHeader>
            <CardTitle>{{entity.name}} Details</CardTitle>
          </CardHeader>
          <CardContent>
            <dl className="grid grid-cols-1 md:grid-cols-2 gap-4">
{{#each entity.fields}}
{{#if showInDetail}}
              <div>
                <dt className="text-sm font-medium text-gray-500">{{label}}</dt>
                <dd className="mt-1 text-sm text-gray-900">
{{#if (eq type "enum")}}
                  <Badge variant={getStatusVariant(String({{camelCase ../entity.name}}.{{name}}))}>
                    { {{camelCase ../entity.name}}.{{name}} || '-'}
                  </Badge>
{{else if (eq type "boolean")}}
                  <Badge variant={ {{camelCase ../entity.name}}.{{name}} ? 'success' : 'default'}>
                    { {{camelCase ../entity.name}}.{{name}} ? 'Yes' : 'No'}
                  </Badge>
{{else if (eq type "date")}}
                  {formatDate({{camelCase ../entity.name}}.{{name}})}
{{else if (eq type "datetime")}}
                  {formatDateTime({{camelCase ../entity.name}}.{{name}})}
{{else if (eq type "number")}}
{{#if (eq name "price")}}
                  {formatCurrency({{camelCase ../entity.name}}.{{name}})}
{{else}}
                  { {{camelCase ../entity.name}}.{{name}} ?? '-'}
{{/if}}
{{else if (eq type "text")}}
                  <p className="whitespace-pre-wrap">{ {{camelCase ../entity.name}}.{{name}} || '-'}</p>
{{else}}
                  { {{camelCase ../entity.name}}.{{name}} || '-'}
{{/if}}
                </dd>
              </div>
{{/if}}
{{/each}}
            </dl>
          </CardContent>
        </Card>

        {/* Metadata */}
        <Card>
          <CardHeader>
            <CardTitle>Metadata</CardTitle>
          </CardHeader>
          <CardContent>
            <dl className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <dt className="text-sm font-medium text-gray-500">ID</dt>
                <dd className="mt-1 text-sm text-gray-900 font-mono">{ {{camelCase entity.name}}.id}</dd>
              </div>
              <div>
                <dt className="text-sm font-medium text-gray-500">Created At</dt>
                <dd className="mt-1 text-sm text-gray-900">{formatDateTime({{camelCase entity.name}}.createdAt)}</dd>
              </div>
              <div>
                <dt className="text-sm font-medium text-gray-500">Updated At</dt>
                <dd className="mt-1 text-sm text-gray-900">{formatDateTime({{camelCase entity.name}}.updatedAt)}</dd>
              </div>
            </dl>
          </CardContent>
        </Card>
      </div>

      {/* Delete confirmation modal */}
      <ConfirmModal
        isOpen={showDeleteModal}
        onClose={() => setShowDeleteModal(false)}
        onConfirm={handleDelete}
        title="Delete {{entity.name}}"
        message="Are you sure you want to delete this {{lowerCase entity.name}}? This action cannot be undone."
        confirmLabel="Delete"
        variant="danger"
        isLoading={isDeleting}
      />
    </div>
  );
}
