import { PageHeader } from '@/components/layout';
import { StatCard, StatIcons, RecentList, QuickActions, ActionIcons } from '@/components/dashboard';
{{#each entities}}
{{#if @first}}
import { use{{pluralName}} } from '@/hooks/use{{pluralName}}';
{{/if}}
{{/each}}

export function DashboardPage() {
{{#each entities}}
{{#if @first}}
  const { {{camelCase pluralName}}, isLoading: isLoading{{pluralName}} } = use{{pluralName}}({ pageSize: 5 });
{{/if}}
{{/each}}

{{#each entities}}
{{#if @first}}
  // Transform {{camelCase pluralName}} for recent list
  const recent{{pluralName}} = {{camelCase pluralName}}.map((item) => ({
    id: item.id,
    title: item.name || `{{name}} ${item.id}`,
    subtitle: item.sku || undefined,
    href: `/{{slug}}/${item.id}`,
    badge: item.status ? {
      text: item.status,
      variant: item.status === 'active' ? 'success' as const : 'default' as const,
    } : undefined,
  }));
{{/if}}
{{/each}}

  const quickActions = [
{{#each entities}}
    {
      id: 'add-{{slug}}',
      label: 'Add {{name}}',
      href: '/{{slug}}/new',
      icon: ActionIcons.Plus,
      description: 'Create a new {{lowerCase name}}',
    },
{{/each}}
  ];

  return (
    <div>
      <PageHeader
        title="{{dashboard.title}}"
        description="Welcome to your dashboard"
      />

      {/* Stats */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
{{#each dashboard.widgets}}
{{#if (eq type "stat-card")}}
        <StatCard
          title="{{statConfig.label}}"
          value="{{statConfig.mockValue}}"
          icon={StatIcons.{{pascalCase statConfig.icon}} }
          trend="{{statConfig.trend}}"
          trendValue="+12%"
        />
{{/if}}
{{/each}}
      </div>

      {/* Main content */}
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Recent list */}
        <div className="lg:col-span-2">
{{#each entities}}
{{#if @first}}
          <RecentList
            title="Recent {{pluralName}}"
            items={recent{{pluralName}} }
            isLoading={isLoading{{pluralName}} }
            viewAllHref="/{{slug}}"
            emptyMessage="No {{lowerCase pluralName}} yet"
          />
{{/if}}
{{/each}}
        </div>

        {/* Quick actions */}
        <div>
          <QuickActions actions={quickActions} />
        </div>
      </div>
    </div>
  );
}
