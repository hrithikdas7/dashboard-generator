/**
 * {{entity.name}} API Contract
 * Generated by Dashboard Generator
 *
 * This file documents the expected API endpoints and data structures
 * for the {{entity.name}} entity. Backend developers should implement
 * these endpoints to match this contract.
 */

// =============================================================================
// Base Configuration
// =============================================================================

export const {{constantCase entity.name}}_API = {
  BASE_PATH: '/api/{{entity.slug}}',
  VERSION: 'v1',
} as const;

// =============================================================================
// Endpoints
// =============================================================================

/**
 * LIST {{constantCase entity.pluralName}}
 * GET /api/{{entity.slug}}
 *
 * Query Parameters:
 * - page: number (default: 1)
 * - pageSize: number (default: {{entity.listConfig.pageSize}})
 * - search: string (searches: {{#each entity.listConfig.searchableFields}}{{this}}{{#unless @last}}, {{/unless}}{{/each}})
 * - sort: string (field name)
 * - sortDirection: 'asc' | 'desc'
{{#each entity.fields}}
{{#if (eq type "enum")}}
 * - {{name}}: {{#each enumValues}}'{{this}}'{{#unless @last}} | {{/unless}}{{/each}} (filter)
{{/if}}
{{/each}}
 *
 * Response: PaginatedResponse<{{entity.name}}>
 */
export interface List{{entity.pluralName}}Response {
  data: {{entity.name}}[];
  total: number;
  page: number;
  pageSize: number;
  totalPages: number;
}

/**
 * GET {{constantCase entity.name}}
 * GET /api/{{entity.slug}}/:id
 *
 * Response: {{entity.name}}
 */
export interface Get{{entity.name}}Response extends {{entity.name}} {}

/**
 * CREATE {{constantCase entity.name}}
 * POST /api/{{entity.slug}}
 *
 * Request Body: Create{{entity.name}}Dto
 * Response: {{entity.name}}
 */
export interface Create{{entity.name}}Request {
{{#each entity.fields}}
{{#if showInForm}}
  {{name}}{{#unless required}}?{{/unless}}: {{#if (eq type "enum")}}{{#each enumValues}}'{{this}}'{{#unless @last}} | {{/unless}}{{/each}}{{else}}{{#if (eq type "text")}}string{{else}}{{#if (eq type "date")}}string{{else}}{{#if (eq type "datetime")}}string{{else}}{{type}}{{/if}}{{/if}}{{/if}}{{/if}};
{{/if}}
{{/each}}
}

/**
 * UPDATE {{constantCase entity.name}}
 * PUT /api/{{entity.slug}}/:id
 *
 * Request Body: Update{{entity.name}}Dto (partial)
 * Response: {{entity.name}}
 */
export interface Update{{entity.name}}Request extends Partial<Create{{entity.name}}Request> {}

/**
 * DELETE {{constantCase entity.name}}
 * DELETE /api/{{entity.slug}}/:id
 *
 * Response: { success: boolean }
 */
export interface Delete{{entity.name}}Response {
  success: boolean;
}

// =============================================================================
// Entity Types (for reference)
// =============================================================================

export interface {{entity.name}} {
  id: string;
{{#each entity.fields}}
  {{name}}{{#unless required}}?{{/unless}}: {{#if (eq type "enum")}}{{#each enumValues}}'{{this}}'{{#unless @last}} | {{/unless}}{{/each}}{{else}}{{#if (eq type "relation")}}string{{else}}{{#if (eq type "text")}}string{{else}}{{#if (eq type "date")}}string{{else}}{{#if (eq type "datetime")}}string{{else}}{{#if (eq type "email")}}string{{else}}{{#if (eq type "url")}}string{{else}}{{type}}{{/if}}{{/if}}{{/if}}{{/if}}{{/if}}{{/if}}{{/if}};
{{/each}}
  createdAt: string;
  updatedAt: string;
}

// =============================================================================
// Validation Rules
// =============================================================================

export const {{constantCase entity.name}}_VALIDATION = {
{{#each entity.fields}}
{{#if showInForm}}
  {{constantCase name}}: {
    required: {{required}},
{{#if minLength}}
    minLength: {{minLength}},
{{/if}}
{{#if maxLength}}
    maxLength: {{maxLength}},
{{/if}}
{{#if min}}
    min: {{min}},
{{/if}}
{{#if max}}
    max: {{max}},
{{/if}}
{{#if (eq type "enum")}}
    allowedValues: [{{#each enumValues}}'{{this}}'{{#unless @last}}, {{/unless}}{{/each}}] as const,
{{/if}}
  },
{{/if}}
{{/each}}
} as const;

// =============================================================================
// Example Payloads
// =============================================================================

export const EXAMPLE_{{constantCase entity.name}} = {
  id: '{{entity.slug}}-001',
{{#each entity.fields}}
{{#if (eq type "string")}}
  {{name}}: 'Example {{label}}',
{{else if (eq type "text")}}
  {{name}}: 'Example {{label}} description text.',
{{else if (eq type "number")}}
  {{name}}: {{#if min}}{{min}}{{else}}100{{/if}},
{{else if (eq type "boolean")}}
  {{name}}: true,
{{else if (eq type "date")}}
  {{name}}: '2024-01-15',
{{else if (eq type "datetime")}}
  {{name}}: '2024-01-15T10:30:00Z',
{{else if (eq type "email")}}
  {{name}}: 'example@email.com',
{{else if (eq type "url")}}
  {{name}}: 'https://example.com',
{{else if (eq type "enum")}}
  {{name}}: '{{first enumValues}}',
{{else if (eq type "relation")}}
  {{name}}: 'related-entity-001',
{{/if}}
{{/each}}
  createdAt: '2024-01-01T00:00:00Z',
  updatedAt: '2024-01-15T10:30:00Z',
};
